# âœ… Paso 5: Configurar Feature Flags con Flipper

Ahora agregaremos Flipper para manejar Feature Flags, lo que nos permitirÃ¡ habilitar o deshabilitar funcionalidades en tiempo de ejecuciÃ³n sin necesidad de cambiar el cÃ³digo.
âœ… Flipper â†’ Permite activar o desactivar caracterÃ­sticas por usuario, grupo, porcentaje, etc.
âœ… IntegraciÃ³n con PostgreSQL â†’ Para persistencia de los Feature Flags.
âœ… Interfaz administrativa â†’ Para gestionar los Feature Flags desde la aplicaciÃ³n.
ğŸ“Œ Commit 5.1: Instalar Flipper y configurar almacenamiento en PostgreSQL
ğŸ”¹ Mensaje de commit:
feat(feature-flags): instala Flipper y configura PostgreSQL como backend
ğŸ”¹ Contenido del commit:
# AÃ±adir Flipper al Gemfile
echo "gem 'flipper', '~> 1.0'" >> Gemfile
echo "gem 'flipper-active_record', '~> 1.0'" >> Gemfile
# Instalar las gemas
bundle install
# Generar la migraciÃ³n para almacenar Feature Flags en PostgreSQL
rails g flipper:active_record
# Ejecutar migraciones
rails db:migrate
# AÃ±adir archivos al commit
git add .
git commit -m "feat(feature-flags): instala Flipper y configura PostgreSQL como backend"
ğŸ“Œ Commit 5.2: Agregar Interfaz de AdministraciÃ³n de Feature Flags
ğŸ”¹ Mensaje de commit:
feat(feature-flags): agrega interfaz de administraciÃ³n para gestionar Feature Flags en Rails
ğŸ”¹ Contenido del commit:
# AÃ±adir Flipper UI para gestiÃ³n visual de los Feature Flags
echo "gem 'flipper-ui', '~> 1.0'" >> Gemfile
# Instalar la gema
bundle install
# Agregar rutas para la interfaz de Flipper
echo "
Rails.application.routes.draw do
mount Flipper::UI.app(Flipper) => '/flipper'
end
" >> config/routes.rb
# AÃ±adir archivos al commit
git add .
git commit -m "feat(feature-flags): agrega interfaz de administraciÃ³n para gestionar Feature Flags en Rails"
ğŸ“ ExplicaciÃ³n y CÃ³digo Generado
Configurar Flipper en Rails (config/initializers/flipper.rb)
require "flipper"
require "flipper/adapters/active_record"
Flipper.configure do |config|
config.default do
Flipper.new(Flipper::Adapters::ActiveRecord.new)
end
end
Ejemplo de Uso en Rails Console
# Activar una nueva funcionalidad solo para ciertos usuarios
Flipper.enable(:nuevo_dashboard, user)
# Desactivar la funcionalidad
Flipper.disable(:nuevo_dashboard)
# Verificar si estÃ¡ habilitada
Flipper.enabled?(:nuevo_dashboard, user) # => true o false
Interfaz de AdministraciÃ³n
DespuÃ©s de configurar Flipper UI, podemos acceder a:
ğŸ”— http://localhost:3000/flipper para gestionar los Feature Flags visualmente.
