# Paso 2: Creaci√≥n de Modelos Base (User, Platform, Role)

Vamos a definir los modelos principales del sistema siguiendo buenas pr√°cticas:

- ‚úÖ User ‚Üí Representa a los usuarios del sistema.
- ‚úÖ Platform ‚Üí Representa las plataformas creadas por los usuarios.
- ‚úÖ Role ‚Üí Maneja los roles de usuario en cada plataforma (usando STI para extenderlo).

üìå Commit 2: Agrega modelos base (User, Platform, Role)

üîπ Mensaje de commit:

> feat: agrega modelos base (User, Platform, Role) con asociaciones iniciales

üîπ Contenido del commit:

```sh
rails g model Company::Business::User email:string name:string
rails g model Company::Business::Platform name:string code:string owner:references{polymorphic}
rails g model Company::Business::Role name:string type:string

rails db:migrate
```

Agregar estructura de STI para los roles

```sh
echo "class Company::Business::Role::Owner < Company::Business::Role; end" > app/models/company/business/role/owner.rb
echo "class Company::Business::Role::Admin < Company::Business::Role; end" > app/models/company/business/role/admin.rb
echo "class Company::Business::Role::Operator < Company::Business::Role; end" > app/models/company/business/role/operator.rb
echo "class Company::Business::Role::Subscriber < Company::Business::Role; end" > app/models/company/business/role/subscriber.rb
echo "class Company::Business::Role::Guest < Company::Business::Role; end" > app/models/company/business/role/guest.rb
```

A√±adir los archivos al commit

```sh
git add .
git commit -m "feat: agrega modelos base (User, Platform, Role) con asociaciones iniciales"
```

## üìù Explicaci√≥n y C√≥digo Generado

```ruby
# app/models/company/business/user.rb
module Company
  module Business # Representa a los usuarios del sistema
    class User < ApplicationRecord
      has_many :platforms,
        foreign_key: :owner_id,
        class_name: "Company::Business::Platform"
    end
  end
end
```

```rb
# app/models/company/business/platform.rb
module Company
  module Business
    class Platform < ApplicationRecord
      belongs_to :owner, polymorphic: true

      validates :code, :name, presence: true
    end
  end
end
```

```rb
# app/models/company/business/role.rb
module Company
  module Business
    class Role < ApplicationRecord # (STI)
      self.abstract_class = true
    end
  end
end
```

Ejemplo de uso en Rails Console:

```rb
# Crear un usuario
user = Company::Business::User.create!(email: "admin@example.com", name: "Admin User")

# Crear una plataforma y asignarle un usuario como due√±o
platform = Company::Business::Platform.create!(name: "Plataforma X", code: "PLX", owner: user)

# Asignar un rol de due√±o a un usuario
role = Company::Business::Role::Owner.create!(name: "Owner")
```
