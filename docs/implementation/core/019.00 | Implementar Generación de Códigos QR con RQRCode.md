# âœ… Paso 19: Implementar GeneraciÃ³n de CÃ³digos QR con RQRCode

Ahora agregaremos RQRCode para permitir la generaciÃ³n de cÃ³digos QR dentro de la aplicaciÃ³n, lo que nos permitirÃ¡:
âœ… Generar cÃ³digos QR dinÃ¡micos para compartir URLs, datos de contacto, etc.
âœ… Soporte para exportaciÃ³n a SVG y PNG.
âœ… IntegraciÃ³n con Active Storage para guardar los cÃ³digos QR.
ğŸ“Œ Commit 19.1: Instalar RQRCode y Configurar GeneraciÃ³n de QR
ğŸ”¹ Mensaje de commit:
feat(qr): instala RQRCode y agrega servicio para generaciÃ³n de cÃ³digos QR
ğŸ”¹ Contenido del commit:
# AÃ±adir RQRCode al Gemfile
echo "gem 'rqrcode', '~> 2.1'" >> Gemfile
# Instalar la gema
bundle install
# Crear servicio de generaciÃ³n de QR
mkdir -p app/services
touch app/services/qr_generator.rb
# AÃ±adir archivos al commit
git add .
git commit -m "feat(qr): instala RQRCode y agrega servicio para generaciÃ³n de cÃ³digos QR"
ğŸ“Œ Commit 19.2: Implementar Servicio para Generar CÃ³digos QR
ğŸ”¹ Mensaje de commit:
feat(qr): agrega servicio QRGenerator para generar cÃ³digos QR en SVG y PNG
ğŸ”¹ Contenido del commit:
Definir el Servicio QRGenerator
require "rqrcode"
class QRGenerator
def self.generate_qr(data, format: :svg)
qr = RQRCode::QRCode.new(data)
    case format
    when :svg
      qr.as_svg(module_size: 5)
    when :png
      qr.as_png(size: 300).to_s
    else
      raise ArgumentError, "Formato no soportado"
    end
end
end
ğŸ”¹ AÃ±adir archivos al commit:
git add .
git commit -m "feat(qr): agrega servicio QRGenerator para generar cÃ³digos QR en SVG y PNG"
ğŸ“Œ Commit 19.3: Agregar Endpoint para Generar CÃ³digos QR
ğŸ”¹ Mensaje de commit:
feat(qr): expone endpoint para generar cÃ³digos QR a partir de una URL
ğŸ”¹ Contenido del commit:
Crear Controlador QRCodeController
class QrCodeController < ApplicationController
def show
qr = QRGenerator.generate_qr(params[:data], format: :svg)
render inline: qr, type: "image/svg+xml"
end
end
Agregar Ruta en config/routes.rb
Rails.application.routes.draw do
get "/qr", to: "qr_code#show"
end
ğŸ”¹ AÃ±adir archivos al commit:
git add .
git commit -m "feat(qr): expone endpoint para generar cÃ³digos QR a partir de una URL"
ğŸ“ ExplicaciÃ³n y CÃ³digo Generado
Ejemplo de Uso en Rails Console
qr_svg = QRGenerator.generate_qr("https://example.com", format: :svg)
File.write("qr.svg", qr_svg)
Ejemplo de GeneraciÃ³n de QR en API
curl "http://localhost:3000/qr?data=https://example.com"
Ejemplo de IntegraciÃ³n en HTML
<img src="<%= qr_code_path(data: 'https://example.com') %>" />
