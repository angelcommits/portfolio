# ✅ Paso 19: Implementar Generación de Códigos QR con RQRCode

Ahora agregaremos RQRCode para permitir la generación de códigos QR dentro de la aplicación, lo que nos permitirá:
✅ Generar códigos QR dinámicos para compartir URLs, datos de contacto, etc.
✅ Soporte para exportación a SVG y PNG.
✅ Integración con Active Storage para guardar los códigos QR.
📌 Commit 19.1: Instalar RQRCode y Configurar Generación de QR
🔹 Mensaje de commit:
feat(qr): instala RQRCode y agrega servicio para generación de códigos QR
🔹 Contenido del commit:
# Añadir RQRCode al Gemfile
echo "gem 'rqrcode', '~> 2.1'" >> Gemfile
# Instalar la gema
bundle install
# Crear servicio de generación de QR
mkdir -p app/services
touch app/services/qr_generator.rb
# Añadir archivos al commit
git add .
git commit -m "feat(qr): instala RQRCode y agrega servicio para generación de códigos QR"
📌 Commit 19.2: Implementar Servicio para Generar Códigos QR
🔹 Mensaje de commit:
feat(qr): agrega servicio QRGenerator para generar códigos QR en SVG y PNG
🔹 Contenido del commit:
Definir el Servicio QRGenerator
require "rqrcode"
class QRGenerator
def self.generate_qr(data, format: :svg)
qr = RQRCode::QRCode.new(data)
    case format
    when :svg
      qr.as_svg(module_size: 5)
    when :png
      qr.as_png(size: 300).to_s
    else
      raise ArgumentError, "Formato no soportado"
    end
end
end
🔹 Añadir archivos al commit:
git add .
git commit -m "feat(qr): agrega servicio QRGenerator para generar códigos QR en SVG y PNG"
📌 Commit 19.3: Agregar Endpoint para Generar Códigos QR
🔹 Mensaje de commit:
feat(qr): expone endpoint para generar códigos QR a partir de una URL
🔹 Contenido del commit:
Crear Controlador QRCodeController
class QrCodeController < ApplicationController
def show
qr = QRGenerator.generate_qr(params[:data], format: :svg)
render inline: qr, type: "image/svg+xml"
end
end
Agregar Ruta en config/routes.rb
Rails.application.routes.draw do
get "/qr", to: "qr_code#show"
end
🔹 Añadir archivos al commit:
git add .
git commit -m "feat(qr): expone endpoint para generar códigos QR a partir de una URL"
📝 Explicación y Código Generado
Ejemplo de Uso en Rails Console
qr_svg = QRGenerator.generate_qr("https://example.com", format: :svg)
File.write("qr.svg", qr_svg)
Ejemplo de Generación de QR en API
curl "http://localhost:3000/qr?data=https://example.com"
Ejemplo de Integración en HTML
<img src="<%= qr_code_path(data: 'https://example.com') %>" />
