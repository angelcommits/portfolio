# 001 - Rails Project Initial Configuration

## Overview

This guide covers the initial setup and configuration of the Rails project, establishing the foundation for the Portfolio as a Service application.

## Objectives

- Initialize Rails project with PostgreSQL as primary database
- Configure SQLite for development and test environments
- Create proper folder structure and modules (Company::Business)
- Configure essential gems for development
- Set up initial project documentation

## Prerequisites

- Ruby 3.2+ installed
- Rails 8.0.1+ installed
- PostgreSQL 14+ available (for production)
- Git initialized in project directory

## Implementation Steps

### Step 1: Initialize Rails Project

Create a new Rails project with PostgreSQL as the primary database:

```bash
# Create new Rails application
rails new portfolio_backend --database=postgresql

# Navigate to project directory
cd portfolio_backend
```

### Step 2: Configure Development Database

Configure SQLite for development and test environments by updating `config/database.yml`:

```yaml
# config/database.yml
default: &default
  adapter: sqlite3
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  timeout: 5000

development:
  <<: *default
  database: db/development.sqlite3

test:
  <<: *default
  database: db/test.sqlite3

production:
  adapter: postgresql
  encoding: unicode
  database: portfolio_backend_production
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  username: <%= ENV['DATABASE_USERNAME'] %>
  password: <%= ENV['DATABASE_PASSWORD'] %>
  host: <%= ENV['DATABASE_HOST'] %>
```

### Step 3: Create Base Directory Structure

```bash
# Create namespace directories
mkdir -p app/models/company/business
mkdir -p app/controllers/company/business
mkdir -p app/services/company/business
mkdir -p app/contexts
mkdir -p app/use_cases
mkdir -p app/adapters
```

### Step 4: Initialize Git Repository

```bash
# Initialize Git
git init
git add .
git commit -m "feat: initialize Rails project with PostgreSQL and SQLite configuration"
```

## Configuration Details

### Database Configuration
- **Development**: SQLite for fast local development
- **Test**: SQLite for fast test execution
- **Production**: PostgreSQL for scalability and reliability

### Directory Structure
- `app/models/company/business/` - Business domain models
- `app/controllers/company/business/` - Business controllers
- `app/services/` - Business logic services
- `app/contexts/` - Bounded contexts for DDD
- `app/use_cases/` - Application use cases
- `app/adapters/` - External service adapters

## Verification

Verify the installation:

```bash
# Test Rails server
rails server

# Run basic Rails console
rails console

# Verify database connection
rails db:create
rails db:migrate
```

## Next Steps

1. **Model Creation**: Proceed to [002 - Base Models](./002.00%20|%20Creación%20de%20Modelos%20Base%20(User,%20Platform,%20Role).md)
2. **Authentication Setup**: Configure authentication system
3. **Testing Framework**: Set up RSpec and testing infrastructure

## Troubleshooting

### Common Issues

**SQLite3 gem missing**:
```bash
bundle add sqlite3
```

**PostgreSQL connection issues**:
- Ensure PostgreSQL service is running
- Verify connection credentials in environment variables

**Permission issues**:
```bash
# Fix directory permissions
chmod -R 755 app/
```

## Related Documentation

- [Development Setup Guide](../../development/01%20SETUP.md)
- [Project Overview](../../workflows/00-project-overview.md)
- [Rails Configuration Best Practices](https://guides.rubyonrails.org/)

---

**Status**: ✅ Completed  
**Last Updated**: January 20, 2025  
**Prerequisites**: Ruby, Rails, PostgreSQL
