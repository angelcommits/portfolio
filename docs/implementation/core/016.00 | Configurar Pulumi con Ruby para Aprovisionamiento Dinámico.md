# âœ… Paso 16: Configurar Pulumi con Ruby para Aprovisionamiento DinÃ¡mico

Ahora implementaremos Pulumi con Ruby como alternativa a Terraform, lo que nos permitirÃ¡:
âœ… Definir infraestructura con Ruby en lugar de HCL.
âœ… Aprovisionamiento mÃ¡s dinÃ¡mico, con condicionales y reutilizaciÃ³n de clases.
âœ… AutomatizaciÃ³n con Pulumi Cloud o integraciÃ³n con CI/CD.
ğŸ“Œ Commit 16.1: Inicializar Pulumi en Ruby
ğŸ”¹ Mensaje de commit:
infra(pulumi): inicializa Pulumi en Ruby para aprovisionamiento dinÃ¡mico
ğŸ”¹ Contenido del commit:
# Instalar Pulumi CLI si no estÃ¡ instalado
curl -fsSL https://get.pulumi.com | sh
# Crear un nuevo proyecto Pulumi con Ruby
mkdir -p infra/pulumi
cd infra/pulumi
pulumi new aws-ruby
# AÃ±adir archivos al commit
git add .
git commit -m "infra(pulumi): inicializa Pulumi en Ruby para aprovisionamiento dinÃ¡mico"
ğŸ“Œ Commit 16.2: Provisionar Servidor EC2 en AWS con Pulumi Ruby
ğŸ”¹ Mensaje de commit:
infra(pulumi): agrega configuraciÃ³n para provisionar servidores EC2 en AWS con Ruby
ğŸ”¹ Contenido del commit:
Modificar infra/pulumi/main.rb
require "pulumi"
require "pulumi/aws"
# ConfiguraciÃ³n de una instancia EC2 en AWS
class MyInfra < Pulumi::Stack
def initialize(name)
super(name)
    instance = Aws::Ec2::Instance.new("app-server",
      instance_type: "t3.micro",
      ami: "ami-0c55b159cbfafe1f0",
      tags: { Name: "CompanyAppServer" }
    )
    Pulumi.export("instance_id", instance.id)
end
end
Pulumi.run(MyInfra)
ğŸ”¹ AÃ±adir archivos al commit:
git add .
git commit -m "infra(pulumi): agrega configuraciÃ³n para provisionar servidores EC2 en AWS con Ruby"
ğŸ“Œ Commit 16.3: Agregar Base de Datos y Balanceador de Carga con Pulumi
ğŸ”¹ Mensaje de commit:
infra(pulumi): agrega base de datos PostgreSQL y balanceador de carga en AWS con Pulumi
ğŸ”¹ Contenido del commit:
Modificar infra/pulumi/main.rb para agregar PostgreSQL y Load Balancer
class MyInfra < Pulumi::Stack
def initialize(name)
super(name)
    # Servidor EC2
    instance = Aws::Ec2::Instance.new("app-server",
      instance_type: "t3.micro",
      ami: "ami-0c55b159cbfafe1f0",
      tags: { Name: "CompanyAppServer" }
    )
    # Base de datos PostgreSQL
    db = Aws::Rds::Instance.new("app-db",
      engine: "postgres",
      instance_class: "db.t3.micro",
      allocated_storage: 20,
      username: "admin",
      password: "password"
    )
    # Load Balancer
    lb = Aws::Alb::LoadBalancer.new("app-lb",
      load_balancer_type: "application",
      security_groups: [],
      subnets: []
    )
    Pulumi.export("instance_id", instance.id)
    Pulumi.export("db_endpoint", db.endpoint)
    Pulumi.export("load_balancer_dns", lb.dns_name)
end
end
Pulumi.run(MyInfra)
ğŸ”¹ AÃ±adir archivos al commit:
git add .
git commit -m "infra(pulumi): agrega base de datos PostgreSQL y balanceador de carga en AWS con Pulumi"
ğŸ“Œ Â¿QuÃ© podemos hacer con Pulumi que no sea tan fÃ¡cil con Terraform?
âœ… LÃ³gica condicional y reutilizaciÃ³n de clases â†’ Puedes crear clases para definir infraestructura reutilizable.
âœ… IntegraciÃ³n nativa con Ruby â†’ Puedes combinar Pulumi con Rails para infraestructura dinÃ¡mica.
âœ… Mejor gestiÃ³n de estados en GitOps â†’ Pulumi Cloud permite hacer rollback mÃ¡s fÃ¡cilmente.
âœ… Manejo mÃ¡s dinÃ¡mico de multi-tenancy â†’ Puedes aprovisionar infraestructuras separadas por cliente en cÃ³digo Ruby.
ğŸ“Œ Â¿Te gustarÃ­a que agregÃ¡ramos Pulumi a CI/CD para aprovisionar infraestructura automÃ¡ticamente? ğŸ˜Š
You said:
si, continue
hazme preguntas una a una sobre las tecnologias a integrar hasta confirmarlas todas y luego entrega los resultados commits a commits hazta resolver cada requerimieto.
ChatGPT said:
