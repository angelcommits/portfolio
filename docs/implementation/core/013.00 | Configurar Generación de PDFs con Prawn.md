# ✅ Paso 13: Configurar Generación de PDFs con Prawn

Ahora agregaremos Prawn para la generación de documentos PDF dentro de la aplicación.
✅ Prawn → Generación de PDFs directamente en Ruby.
✅ Soporte para tablas, imágenes y estilos personalizados.
✅ Exportación de reportes desde modelos como User y Platform.
📌 Commit 13.1: Instalar Prawn y Crear Generador de PDFs
🔹 Mensaje de commit:
feat(pdf): instala Prawn y agrega generador de PDFs para exportar datos
🔹 Contenido del commit:
# Añadir Prawn al Gemfile
echo "gem 'prawn', '~> 2.4'" >> Gemfile
# Instalar la gema
bundle install
# Crear un servicio para la generación de PDFs
mkdir -p app/services
touch app/services/pdf_generator.rb
# Añadir archivos al commit
git add .
git commit -m "feat(pdf): instala Prawn y agrega generador de PDFs para exportar datos"
📌 Commit 13.2: Implementar Servicio para Generar PDFs
🔹 Mensaje de commit:
feat(pdf): agrega servicio PDFGenerator para exportación de reportes
🔹 Contenido del commit:
Definir el Servicio PDFGenerator
# app/services/pdf_generator.rb
require "prawn"
class PDFGenerator
def self.generate_user_list(users)
Prawn::Document.new do |pdf|
pdf.text "Lista de Usuarios", size: 18, style: :bold
pdf.move_down 10
      table_data = [["ID", "Nombre", "Email"]]
      users.each do |user|
        table_data << [user.id, user.name, user.email]
      end
      pdf.table(table_data, header: true, row_colors: ["F0F0F0", "FFFFFF"])
      pdf.render
    end
end
end
🔹 Añadir archivos al commit:
git add .
git commit -m "feat(pdf): agrega servicio PDFGenerator para exportación de reportes"
📌 Commit 13.3: Integrar Generación de PDFs en un Endpoint
🔹 Mensaje de commit:
feat(pdf): agrega endpoint en UsersController para exportar lista de usuarios en PDF
🔹 Contenido del commit:
Modificar UsersController para exportar PDFs
# app/controllers/users_controller.rb
class UsersController < ApplicationController
def index
@users = Company::Business::User.all
    respond_to do |format|
      format.html
      format.json { render json: @users }
      format.pdf do
        pdf = PDFGenerator.generate_user_list(@users)
        send_data pdf, filename: "usuarios.pdf", type: "application/pdf", disposition: "inline"
      end
    end
end
end
🔹 Añadir archivos al commit:
git add .
git commit -m "feat(pdf): agrega endpoint en UsersController para exportar lista de usuarios en PDF"
📝 Explicación y Código Generado
Ejemplo de Uso en Rails Console
users = Company::Business::User.all
pdf = PDFGenerator.generate_user_list(users)
File.open("usuarios.pdf", "wb") { |file| file.write(pdf) }
Ejemplo de Uso en API
# Descargar el PDF con la lista de usuarios
curl -X GET "http://localhost:3000/users.pdf" -o usuarios.pdf
Resultado en PDF
    Se genera un documento con una tabla de usuarios.
    Incluye encabezados con estilos básicos.
    Se puede abrir directamente en el navegador (disposition: "inline").
