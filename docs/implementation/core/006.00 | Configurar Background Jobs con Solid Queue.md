# ✅ Paso 6: Configurar Background Jobs con Solid Queue

Ahora agregaremos Solid Queue como sistema de procesamiento de tareas en segundo plano, usando Active Record como backend, eliminando la necesidad de Redis.
✅ Solid Queue → Background jobs nativo de Rails 7.1, basado en la base de datos.
✅ Procesamiento asíncrono → Para tareas como envío de correos, procesamiento de datos, etc.
✅ Multi-tenancy → Integrado con la estrategia híbrida de multi-tenancy (schema-based + row-based).
📌 Commit 6.1: Instalar Solid Queue y configurar Active Job
🔹 Mensaje de commit:
feat(jobs): instala Solid Queue como backend para procesamiento de tareas en segundo plano
🔹 Contenido del commit:
# Crear la tabla de jobs en la base de datos
rails solid_queue:install:migrations
# Ejecutar migraciones
rails db:migrate
# Configurar Solid Queue en Active Job
echo "
Rails.application.config.active_job.queue_adapter = :solid_queue
" >> config/application.rb
# Añadir archivos al commit
git add .
git commit -m "feat(jobs): instala Solid Queue como backend para procesamiento de tareas en segundo plano"
📌 Commit 6.2: Implementar un Job de Prueba (Notificación por Correo)
🔹 Mensaje de commit:
feat(jobs): agrega un job de prueba para envío de notificaciones
🔹 Contenido del commit:
# Generar un Job de prueba
rails g job company/business/notification
# Añadir archivos al commit
git add .
git commit -m "feat(jobs): agrega un job de prueba para envío de notificaciones"
📝 Explicación y Código Generado
Configurar Solid Queue (config/application.rb)
# Configura Solid Queue como el backend para Active Job
Rails.application.config.active_job.queue_adapter = :solid_queue
Definir un Job de Prueba (app/jobs/company/business/notification_job.rb)
module Company
module Business
class NotificationJob < ApplicationJob
queue_as :default
      def perform(user_id)
        user = Company::Business::User.find(user_id)
        puts "Enviando notificación a #{user.email}"
      end
    end
end
end
Ejemplo de Uso en Rails Console
# Agendar un job para ejecución asíncrona
Company::Business::NotificationJob.perform_later(user.id)
