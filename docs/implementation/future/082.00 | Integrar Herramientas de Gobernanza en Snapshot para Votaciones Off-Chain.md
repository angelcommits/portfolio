# ‚úÖ Paso 82: Integrar Herramientas de Gobernanza en Snapshot para Votaciones Off-Chain

Ahora agregaremos Snapshot, permitiendo que los miembros de la DAO voten en decisiones de gobernanza sin necesidad de pagar gas.
‚úÖ Votaci√≥n Off-Chain ‚Üí Los usuarios pueden votar sin usar gas en Ethereum.
‚úÖ Peso de Voto Basado en GOVR ‚Üí Los usuarios con m√°s tokens tienen mayor poder de voto.
‚úÖ Web3.js + Stimulus.js ‚Üí Para conectar la DAO con Snapshot.
‚úÖ Interfaz Snapshot ‚Üí Para visualizar y participar en votaciones.
üìå Commit 82.1: Crear Espacio de la DAO en Snapshot
üîπ Mensaje de commit:
feat(snapshot-dao): configura espacio de gobernanza en Snapshot
üîπ Contenido del commit:
1Ô∏è‚É£ Configurar Espacio en Snapshot:
    Crear cuenta en Snapshot.org.
    Agregar espacio con direcci√≥n del contrato GOVR.
    Definir pol√≠ticas de votaci√≥n y delegaci√≥n.
2Ô∏è‚É£ A√±adir Configuraci√≥n del Espacio en config/snapshot.yml
snapshot:
  space: "yourdao.eth"
  token: "0xYourGOVRTokenAddress"
  strategies:
    - name: "erc20-balance-of"
      params:
        address: "0xYourGOVRTokenAddress"
        symbol: "GOVR"
        decimals: 18
üîπ A√±adir archivos al commit:
git add .
git commit -m "feat(snapshot-dao): configura espacio de gobernanza en Snapshot"
üìå Commit 82.2: Integrar Creaci√≥n de Propuestas en Snapshot desde la UI
üîπ Mensaje de commit:
feat(snapshot-dao): agrega UI para crear propuestas en Snapshot
üîπ Contenido del commit:
Modificar app/javascript/controllers/snapshot_proposals_controller.js
import { Controller } from "@hotwired/stimulus";
import Web3 from "web3";
export default class extends Controller {
  static targets = ["title", "description"];
  async createProposal() {
    if (!window.ethereum) {
      alert("Por favor instala MetaMask");
      return;
    }
    const web3 = new Web3(window.ethereum);
    await window.ethereum.request({ method: "eth_requestAccounts" });
    const title = this.titleTarget.value;
    const description = this.descriptionTarget.value;
    const proposal = {
      space: "yourdao.eth",
      type: "single-choice",
      title: title,
      body: description,
      choices: ["S√≠", "No"],
      start: Math.floor(Date.now() / 1000),
      end: Math.floor(Date.now() / 1000) + 604800, // 7 d√≠as
      snapshot: await web3.eth.getBlockNumber(),
      plugins: {},
      metadata: {}
    };
    await fetch("https://hub.snapshot.org/api/proposal", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(proposal)
    });
    alert("Propuesta creada en Snapshot");
  }
}
Modificar app/views/snapshot_proposals/index.html.erb
<h2>Crear Propuesta en Snapshot</h2>
<label>T√≠tulo:</label>
<input type="text" data-snapshot-proposals-target="title">
<label>Descripci√≥n:</label>
<textarea data-snapshot-proposals-target="description"></textarea>
<button data-controller="snapshot-proposals" data-action="click->snapshot-proposals#createProposal">
  Crear Propuesta
</button>
üîπ A√±adir archivos al commit:
git add .
git commit -m "feat(snapshot-dao): agrega UI para crear propuestas en Snapshot"
üìå Commit 82.3: Integrar Votaci√≥n Off-Chain en Snapshot desde la UI
üîπ Mensaje de commit:
feat(snapshot-dao): agrega UI para votar en Snapshot sin gas
üîπ Contenido del commit:
Modificar app/javascript/controllers/snapshot_voting_controller.js
import { Controller } from "@hotwired/stimulus";
import Web3 from "web3";
export default class extends Controller {
  static targets = ["proposalId", "choice"];
  async vote() {
    if (!window.ethereum) {
      alert("Por favor instala MetaMask");
      return;
    }
    const web3 = new Web3(window.ethereum);
    await window.ethereum.request({ method: "eth_requestAccounts" });
    const proposalId = this.proposalIdTarget.value;
    const choice = parseInt(this.choiceTarget.value, 10);
    const vote = {
      space: "yourdao.eth",
      proposal: proposalId,
      choice: choice,
      metadata: {}
    };
    await fetch("https://hub.snapshot.org/api/vote", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(vote)
    });
    alert("Voto registrado en Snapshot");
  }
}
Modificar app/views/snapshot_voting/index.html.erb
<h2>Votar en Snapshot</h2>
<label>ID de la Propuesta:</label>
<input type="text" data-snapshot-voting-target="proposalId">
<label>Tu Voto (1 = S√≠, 2 = No):</label>
<input type="number" data-snapshot-voting-target="choice">
<button data-controller="snapshot-voting" data-action="click->snapshot-voting#vote">
  Votar en Snapshot
</button>
üîπ A√±adir archivos al commit:
git add .
git commit -m "feat(snapshot-dao): agrega UI para votar en Snapshot sin gas"
üìù Explicaci√≥n y C√≥digo Generado
Ejemplo de Creaci√≥n de Propuesta en API
curl -X POST "https://hub.snapshot.org/api/proposal" \
  -H "Content-Type: application/json" \
  -d '{ "space": "yourdao.eth", "title": "Nueva propuesta", "choices": ["S√≠", "No"], "snapshot": 15000000 }'
‚úÖ La propuesta se publica en Snapshot.
Ejemplo de Votaci√≥n en API
curl -X POST "https://hub.snapshot.org/api/vote" \
  -H "Content-Type: application/json" \
  -d '{ "space": "yourdao.eth", "proposal": "0xProposalId", "choice": 1 }'
‚úÖ El usuario vota en la DAO sin pagar gas.
Ejemplo de Panel de Snapshot en Web
https://snapshot.org/#/yourdao.eth
‚úÖ Los miembros pueden votar y administrar la DAO sin usar gas.
