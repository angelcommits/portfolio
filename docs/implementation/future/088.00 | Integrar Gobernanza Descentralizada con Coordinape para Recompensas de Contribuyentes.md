# ✅ Paso 88: Integrar Gobernanza Descentralizada con Coordinape para Recompensas de Contribuyentes

Ahora agregaremos Coordinape, permitiendo que los miembros de la DAO voten y asignen recompensas a los colaboradores más activos de forma descentralizada.
✅ Recompensas Basadas en Consenso → Los miembros asignan recompensas entre ellos.
✅ Sistema de Círculos de Recompensas → Permite que cada equipo gestione sus propios incentivos.
✅ Web3.js + Stimulus.js → Para interactuar con la plataforma desde la UI.
✅ Integración con la DAO → Los fondos provienen de la tesorería en Gnosis Safe.
📌 Commit 88.1: Configurar Círculos de Recompensas en Coordinape
🔹 Mensaje de commit:
feat(coordinape-rewards): configura círculos de recompensas descentralizadas en Coordinape
🔹 Contenido del commit:
1️⃣ Crear una DAO en Coordinape
    Agregar dirección de la DAO.
    Definir círculos de contribuyentes (desarrollo, comunidad, diseño, etc.).
    Configurar frecuencia de distribución de recompensas.
2️⃣ Añadir Configuración en config/coordinape.yml
coordinape:
  dao: "yourdao.eth"
  circles:
    - name: "Desarrollo"
      budget: 5000 GOVR
    - name: "Comunidad"
      budget: 3000 GOVR
    - name: "Diseño"
      budget: 2000 GOVR
  reward_frequency: "mensual"
🔹 Añadir archivos al commit:
git add .
git commit -m "feat(coordinape-rewards): configura círculos de recompensas descentralizadas en Coordinape"
📌 Commit 88.2: Integrar Distribución de Fondos desde Gnosis Safe a Coordinape
🔹 Mensaje de commit:
feat(coordinape-rewards): integra distribución de fondos desde la tesorería de la DAO a Coordinape
🔹 Contenido del commit:
Modificar GnosisSafeTreasury.sol para Enviar Fondos a Coordinape
contract GnosisSafeTreasury {
    address public coordinape;
    address public gnosisSafe;
    constructor(address _coordinape, address _gnosisSafe) {
        coordinape = _coordinape;
        gnosisSafe = _gnosisSafe;
    }
    function sendFundsToCoordinape(uint256 amount) external {
        require(msg.sender == gnosisSafe, "Solo Gnosis Safe puede enviar fondos");
        payable(coordinape).transfer(amount);
    }
}
🔹 Añadir archivos al commit:
git add .
git commit -m "feat(coordinape-rewards): integra distribución de fondos desde la tesorería de la DAO a Coordinape"
📌 Commit 88.3: Integrar UI para Asignación de Recompensas en Coordinape
🔹 Mensaje de commit:
feat(coordinape-rewards): agrega UI para asignar recompensas entre miembros de la DAO
🔹 Contenido del commit:
Modificar app/javascript/controllers/coordinape_rewards_controller.js
import { Controller } from "@hotwired/stimulus";
import Web3 from "web3";
export default class extends Controller {
  static targets = ["recipient", "amount"];
  async sendReward() {
    if (!window.ethereum) {
      alert("Por favor instala MetaMask");
      return;
    }
    const web3 = new Web3(window.ethereum);
    await window.ethereum.request({ method: "eth_requestAccounts" });
    const recipient = this.recipientTarget.value;
    const amount = Web3.utils.toWei(this.amountTarget.value, "ether");
    await fetch("https://api.coordinape.com/v1/allocate", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        dao: "yourdao.eth",
        circle: "Desarrollo",
        recipient: recipient,
        amount: amount
      })
    });
    alert("Recompensa asignada con éxito.");
  }
}
Modificar app/views/coordinape_rewards/index.html.erb
<h2>Asignar Recompensas en la DAO</h2>
<label>Dirección del Miembro:</label>
<input type="text" data-coordinape-rewards-target="recipient">
<label>Monto en GOVR:</label>
<input type="text" data-coordinape-rewards-target="amount">
<button data-controller="coordinape-rewards" data-action="click->coordinape-rewards#sendReward">
  Asignar Recompensa
</button>
🔹 Añadir archivos al commit:
git add .
git commit -m "feat(coordinape-rewards): agrega UI para asignar recompensas entre miembros de la DAO"
📝 Explicación y Código Generado
Ejemplo de Enviar Fondos a Coordinape en API
curl -X POST "http://localhost:3000/coordinape/send_funds" \
  -H "Content-Type: application/json" \
  -d '{ "amount": 5000 }'
✅ La DAO transfiere fondos a Coordinape para distribución.
Ejemplo de Asignación de Recompensa en API
curl -X POST "https://api.coordinape.com/v1/allocate" \
  -H "Content-Type: application/json" \
  -d '{ "dao": "yourdao.eth", "circle": "Desarrollo", "recipient": "0xUserWallet", "amount": "500" }'
✅ El usuario recibe 500 GOVR en Coordinape.
Ejemplo de Panel de Coordinape en Web
https://app.coordinape.com/
✅ Los miembros pueden ver sus recompensas y asignarlas a otros colaboradores.
