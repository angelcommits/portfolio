# ✅ Paso 44: Integrar Dashboard de Firmas Multisig con React + Safe Apps SDK

Ahora agregaremos un Dashboard de Firmas Multisig con React + Safe Apps SDK, permitiendo a los usuarios gestionar y firmar contratos directamente dentro de Gnosis Safe UI.
✅ React + Safe Apps SDK → Para interactuar con contratos en Gnosis Safe.
✅ Web3.js + ethers.js → Manejo de firmas y transacciones on-chain.
✅ Safe Transaction Service API → Para obtener datos de contratos pendientes.
✅ UX optimizada para multisig → Permite visualizar, aprobar y ejecutar transacciones.
📌 Commit 44.1: Configurar Proyecto React + Safe Apps SDK
🔹 Mensaje de commit:
feat(safe-app): configura React con Safe Apps SDK para Dashboard de Firmas Multisig
🔹 Contenido del commit:
Crear la App con Vite + React
npx create-vite safe-app-dashboard --template react
cd safe-app-dashboard
yarn
Instalar Safe Apps SDK y Dependencias Web3
yarn add @safe-global/safe-apps-react-sdk ethers web3
Modificar src/main.jsx para Inicializar Safe Apps SDK
import React from "react";
import ReactDOM from "react-dom/client";
import { SafeProvider } from "@safe-global/safe-apps-react-sdk";
import App from "./App";
ReactDOM.createRoot(document.getElementById("root")).render(
  <SafeProvider>
    <App />
  </SafeProvider>
);
🔹 Añadir archivos al commit:
git add .
git commit -m "feat(safe-app): configura React con Safe Apps SDK para Dashboard de Firmas Multisig"
📌 Commit 44.2: Crear Dashboard para Mostrar Firmas Pendientes
🔹 Mensaje de commit:
feat(safe-app): agrega dashboard para visualizar contratos pendientes en Gnosis Safe
🔹 Contenido del commit:
Crear src/components/Dashboard.jsx
import { useEffect, useState } from "react";
import { SafeAppConnector } from "@safe-global/safe-apps-react-sdk";
import axios from "axios";
const SAFE_TX_SERVICE = "https://safe-transaction.gnosis.io/api/v1";
const Dashboard = () => {
  const [safeInfo, setSafeInfo] = useState(null);
  const [pendingTransactions, setPendingTransactions] = useState([]);
  useEffect(() => {
    const fetchSafeInfo = async () => {
      const safe = await SafeAppConnector.getSafeInfo();
      setSafeInfo(safe);
    };
    fetchSafeInfo();
  }, []);
  useEffect(() => {
    if (safeInfo) {
      const fetchPendingTransactions = async () => {
        const response = await axios.get(
          `${SAFE_TX_SERVICE}/safes/${safeInfo.safeAddress}/multisig-transactions/`
        );
        const pendingTxs = response.data.results.filter(tx => !tx.isExecuted);
        setPendingTransactions(pendingTxs);
      };
      fetchPendingTransactions();
    }
  }, [safeInfo]);
  return (
    <div>
      <h1>Contratos Pendientes en Gnosis Safe</h1>
      {pendingTransactions.length > 0 ? (
        <ul>
          {pendingTransactions.map(tx => (
            <li key={tx.safeTxHash}>
              <p>Hash: {tx.safeTxHash}</p>
              <p>Firmas requeridas: {tx.confirmationsRequired}</p>
              <p>Firmas actuales: {tx.confirmations.length}</p>
              <button>Firmar</button>
            </li>
          ))}
        </ul>
      ) : (
        <p>No hay contratos pendientes.</p>
      )}
    </div>
  );
};
export default Dashboard;
Modificar src/App.jsx para Mostrar Dashboard
import Dashboard from "./components/Dashboard";
function App() {
  return (
    <div>
      <Dashboard />
    </div>
  );
}
export default App;
🔹 Añadir archivos al commit:
git add .
git commit -m "feat(safe-app): agrega dashboard para visualizar contratos pendientes en Gnosis Safe"
📌 Commit 44.3: Agregar Firma de Contratos desde Safe Apps
🔹 Mensaje de commit:
feat(safe-app): agrega funcionalidad para firmar contratos pendientes desde Safe Apps
🔹 Contenido del commit:
Modificar Dashboard.jsx para Firmar Contratos
import { useEffect, useState } from "react";
import { SafeAppConnector } from "@safe-global/safe-apps-react-sdk";
import axios from "axios";
const SAFE_TX_SERVICE = "https://safe-transaction.gnosis.io/api/v1";
const Dashboard = () => {
  const [safeInfo, setSafeInfo] = useState(null);
  const [pendingTransactions, setPendingTransactions] = useState([]);
  useEffect(() => {
    const fetchSafeInfo = async () => {
      const safe = await SafeAppConnector.getSafeInfo();
      setSafeInfo(safe);
    };
    fetchSafeInfo();
  }, []);
  useEffect(() => {
    if (safeInfo) {
      const fetchPendingTransactions = async () => {
        const response = await axios.get(
          `${SAFE_TX_SERVICE}/safes/${safeInfo.safeAddress}/multisig-transactions/`
        );
        const pendingTxs = response.data.results.filter(tx => !tx.isExecuted);
        setPendingTransactions(pendingTxs);
      };
      fetchPendingTransactions();
    }
  }, [safeInfo]);
  const signTransaction = async (txHash) => {
    const safeSdk = await SafeAppConnector.getSafeSdk();
    const tx = await safeSdk.confirmTransaction(txHash);
    alert(`Transacción firmada: ${tx.hash}`);
  };
  return (
    <div>
      <h1>Contratos Pendientes en Gnosis Safe</h1>
      {pendingTransactions.length > 0 ? (
        <ul>
          {pendingTransactions.map(tx => (
            <li key={tx.safeTxHash}>
              <p>Hash: {tx.safeTxHash}</p>
              <p>Firmas requeridas: {tx.confirmationsRequired}</p>
              <p>Firmas actuales: {tx.confirmations.length}</p>
              <button onClick={() => signTransaction(tx.safeTxHash)}>Firmar</button>
            </li>
          ))}
        </ul>
      ) : (
        <p>No hay contratos pendientes.</p>
      )}
    </div>
  );
};
export default Dashboard;
🔹 Añadir archivos al commit:
git add .
git commit -m "feat(safe-app): agrega funcionalidad para firmar contratos pendientes desde Safe Apps"
📝 Explicación y Código Generado
Ejemplo de Firma de Contrato en Safe Apps
    El usuario abre el Safe App dentro de Gnosis Safe.
    El Dashboard muestra los contratos pendientes de firma.
    El usuario selecciona un contrato y firma la transacción.
    La firma se registra en Gnosis Safe y se transmite a la Blockchain.
Ejemplo de Firma con Safe SDK en React
signTransaction("0xSafeTxHash");
✅ El usuario firma directamente desde Safe Apps sin salir de Gnosis Safe.
Ejemplo de Verificación de Firma con Safe API
curl -X GET "https://safe-transaction.gnosis.io/api/v1/safes/0xSafeAddress/multisig-transactions/"
✅ Confirma que la firma fue registrada en el contrato multisig.
