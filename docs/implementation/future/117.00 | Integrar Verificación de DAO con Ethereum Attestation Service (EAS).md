# âœ… Paso 117: Integrar VerificaciÃ³n de DAO con Ethereum Attestation Service (EAS)

Ahora agregaremos Ethereum Attestation Service (EAS), permitiendo que la DAO genere y valide certificaciones descentralizadas para sus miembros y transacciones.
âœ… Certificados Descentralizados â†’ Los miembros pueden emitir y recibir certificaciones verificables.
âœ… VerificaciÃ³n en Blockchain â†’ Usa contratos en Ethereum para almacenar certificaciones inmutables.
âœ… Compatibilidad con Safe Multi-Sig â†’ Permite aprobaciones multi-firma en atestaciones.
âœ… Web3.js + Stimulus.js â†’ Para gestionar certificaciones desde la UI.
âœ… Smart Contracts en Solidity â†’ Para emitir y validar atestaciones en la DAO.
ğŸ“Œ Commit 117.1: Configurar Ethereum Attestation Service (EAS) para la DAO
ğŸ”¹ Mensaje de commit:
feat(eas-config): configura Ethereum Attestation Service (EAS) para certificaciones descentralizadas en la DAO
ğŸ”¹ Contenido del commit:
1ï¸âƒ£ Registrar la DAO en EAS
    Obtener la direcciÃ³n del EAS Schema Registry en la red deseada.
    Definir tipos de certificaciones (Ejemplo: verificaciÃ³n de identidad, reputaciÃ³n, transacciones).
2ï¸âƒ£ AÃ±adir ConfiguraciÃ³n en config/eas.yml
eas:
  enabled: true
  schema_registry: "0xYourSchemaRegistryAddress"
  dao_verified_membership_schema: "0xSchemaForDAOMembership"
  dao_transaction_attestations: "0xSchemaForTransactionValidation"
ğŸ”¹ AÃ±adir archivos al commit:
git add .
git commit -m "feat(eas-config): configura Ethereum Attestation Service (EAS) para certificaciones descentralizadas en la DAO"
ğŸ“Œ Commit 117.2: Implementar Smart Contract para Atestaciones con EAS
ğŸ”¹ Mensaje de commit:
feat(eas-smartcontract): agrega smart contract para emitir y validar certificaciones en la DAO con EAS
ğŸ”¹ Contenido del commit:
Definir DAOAttestation.sol en contracts/DAOAttestation.sol
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;
import "@ethereum-attestation-service/eas-contracts/contracts/IEAS.sol";
contract DAOAttestation {
    IEAS public eas;
    address public daoAdmin;
    event AttestationCreated(address indexed recipient, bytes32 attestationId);
    constructor(address _easAddress) {
        eas = IEAS(_easAddress);
        daoAdmin = msg.sender;
    }
    function attestMembership(address member, bytes32 schemaId) external {
        require(msg.sender == daoAdmin, "Solo el admin puede atestar");
        bytes memory data = abi.encodePacked(member);
        bytes32 attestationId = eas.attest(schemaId, data);
        emit AttestationCreated(member, attestationId);
    }
    function validateAttestation(bytes32 attestationId) external view returns (bool) {
        return eas.isAttestationValid(attestationId);
    }
}
ğŸ”¹ AÃ±adir archivos al commit:
git add .
git commit -m "feat(eas-smartcontract): agrega smart contract para emitir y validar certificaciones en la DAO con EAS"
ğŸ“Œ Commit 117.3: Integrar UI para Gestionar Certificaciones con EAS
ğŸ”¹ Mensaje de commit:
feat(eas-ui): agrega UI para emitir y validar certificaciones en la DAO con EAS
ğŸ”¹ Contenido del commit:
Modificar app/javascript/controllers/eas_controller.js
import { Controller } from "@hotwired/stimulus";
import Web3 from "web3";
export default class extends Controller {
  static targets = ["member", "attestationId", "validationResult"];
  async attestMembership() {
    if (!window.ethereum) {
      alert("Por favor instala MetaMask");
      return;
    }
    const web3 = new Web3(window.ethereum);
    await window.ethereum.request({ method: "eth_requestAccounts" });
    const member = this.memberTarget.value;
    const contract = new web3.eth.Contract(
      [{ name: "attestMembership", type: "function", inputs: [{ name: "member", type: "address" }, { name: "schemaId", type: "bytes32" }] }],
      "0xYourDAOAttestationContractAddress"
    );
    await contract.methods.attestMembership(member, "0xSchemaForDAOMembership").send({
      from: window.ethereum.selectedAddress,
    });
    alert("MembresÃ­a atestada con Ã©xito");
  }
  async validateAttestation() {
    const response = await fetch(`/eas/validate?attestation_id=${this.attestationIdTarget.value}`);
    const data = await response.json();
    this.validationResultTarget.innerText = data.valid ? "âœ… VÃ¡lido" : "âŒ InvÃ¡lido";
  }
}
Modificar app/views/eas/index.html.erb
<h2>Certificaciones Descentralizadas con EAS</h2>
<h3>Emitir AtestaciÃ³n de MembresÃ­a</h3>
<label>DirecciÃ³n del Miembro:</label>
<input type="text" data-eas-target="member">
<button data-controller="eas" data-action="click->eas#attestMembership">
  Atestar MembresÃ­a
</button>
<h3>Validar AtestaciÃ³n</h3>
<label>ID de AtestaciÃ³n:</label>
<input type="text" data-eas-target="attestationId">
<button data-controller="eas" data-action="click->eas#validateAttestation">
  Validar AtestaciÃ³n
</button>
<pre data-eas-target="validationResult">Sin verificar</pre>
ğŸ”¹ AÃ±adir archivos al commit:
git add .
git commit -m "feat(eas-ui): agrega UI para emitir y validar certificaciones en la DAO con EAS"
ğŸ“ ExplicaciÃ³n y CÃ³digo Generado
Ejemplo de EmisiÃ³n de AtestaciÃ³n en API
curl -X POST "http://localhost:3000/eas/attest" \
  -H "Content-Type: application/json" \
  -d '{ "member": "0xUserWallet" }'
âœ… Emite una certificaciÃ³n de membresÃ­a para un usuario.
Ejemplo de ValidaciÃ³n de AtestaciÃ³n en API
curl -X GET "http://localhost:3000/eas/validate?attestation_id=0xAttestationHash"
âœ… Verifica si una certificaciÃ³n es vÃ¡lida en la blockchain.
Ejemplo de Panel de Certificaciones en Ethereum Attestation Service
https://attest.sh/
âœ… Los miembros de la DAO pueden ver y gestionar certificaciones descentralizadas.
