✅ Paso 1: Configuración /Inicial del Proyecto Rails

Voy a iniciar con el primer commit, estableciendo la base del proyecto. Esto incluirá:
1️⃣ Inicializar el proyecto Rails con PostgreSQL como base de datos.
2️⃣ Configurar SQLite para desarrollo y test.
3️⃣ Crear la estructura de carpetas y módulos (Company::Business).
4️⃣ Configurar las gemas base necesarias para el desarrollo.
5️⃣ Generar modelos clave (User, Platform, Role).
6️⃣ Documentar la instalación y configuración inicial en el README.md.
📌 Commit 1: Inicialización del Proyecto Rails
🔹 Mensaje de commit (Convencional Commits):
feat: inicializa el proyecto Rails con PostgreSQL y SQLite
🔹 Contenido del commit:

# Crear un nuevo proyecto Rails con PostgreSQL como base de datos

rails new company_app --database=postgresql

# Entrar en la carpeta del proyecto

cd company_app

# Configurar SQLite en los entornos de desarrollo y test

sed -i '' 's/adapter: postgresql/adapter: sqlite3/' config/database.yml
sed -i '' 's/database: company_app_development/database: db\/development.sqlite3/' config/database.yml
sed -i '' 's/database: company_app_test/database: db\/test.sqlite3/' config/database.yml

# Crear la estructura base

mkdir -p app/models/company/business

# Inicializar Git

git init
git add .
git commit -m "feat: inicializa el proyecto Rails con PostgreSQL y SQLite"

✅ Paso 2: Creación de Modelos Base (User, Platform, Role)

Vamos a definir los modelos principales del sistema siguiendo buenas prácticas:
✅ User → Representa a los usuarios del sistema.
✅ Platform → Representa las plataformas creadas por los usuarios.
✅ Role → Maneja los roles de usuario en cada plataforma (usando STI para extenderlo).
📌 Commit 2: Agrega modelos base (User, Platform, Role)
🔹 Mensaje de commit:
feat: agrega modelos base (User, Platform, Role) con asociaciones iniciales
🔹 Contenido del commit:

# Generar modelo User

rails g model Company::Business::User email:string name:string

# Generar modelo Platform con referencia al owner (User)

rails g model Company::Business::Platform name:string code:string owner:references{polymorphic}

# Generar modelo Role usando Single Table Inheritance (STI)

rails g model Company::Business::Role name:string type:string

# Ejecutar migraciones

rails db:migrate

# Agregar estructura de STI para los roles

echo "class Company::Business::Role::Owner < Company::Business::Role; end" > app/models/company/business/role/owner.rb
echo "class Company::Business::Role::Admin < Company::Business::Role; end" > app/models/company/business/role/admin.rb
echo "class Company::Business::Role::Operator < Company::Business::Role; end" > app/models/company/business/role/operator.rb
echo "class Company::Business::Role::Subscriber < Company::Business::Role; end" > app/models/company/business/role/subscriber.rb
echo "class Company::Business::Role::Guest < Company::Business::Role; end" > app/models/company/business/role/guest.rb

# Añadir los archivos al commit

git add .
git commit -m "feat: agrega modelos base (User, Platform, Role) con asociaciones iniciales"
📝 Explicación y Código Generado
Modelo User

# app/models/company/business/user.rb

module Company
module Business # Representa a los usuarios del sistema
class User < ApplicationRecord
has_many :platforms, foreign_key: :owner_id, class_name: "Company::Business::Platform"
end
end
end
Modelo Platform

# app/models/company/business/platform.rb

module Company
module Business # Representa las plataformas creadas por los usuarios
class Platform < ApplicationRecord
belongs_to :owner, polymorphic: true
validates :code, :name, presence: true
end
end
end
Modelo Role con STI

# app/models/company/business/role.rb

module Company
module Business # Implementa el sistema de roles mediante Single Table Inheritance (STI)
class Role < ApplicationRecord
self.abstract_class = true
end
end
end
Ejemplo de uso en Rails Console:

# Crear un usuario

user = Company::Business::User.create!(email: "admin@example.com", name: "Admin User")

# Crear una plataforma y asignarle un usuario como dueño

platform = Company::Business::Platform.create!(name: "Plataforma X", code: "PLX", owner: user)

# Asignar un rol de dueño a un usuario

role = Company::Business::Role::Owner.create!(name: "Owner")
